<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Sorteo Ganadoras - Quimey P√°del</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    :root {
      --bg: #ffe6f0;
      --card-bg: #ffffff;
      --primary: #ff4f9a;
      --primary-dark: #e33880;
      --accent: #ffb6d9;
      --text-main: #2b2b2b;
      --text-muted: #777;
      --shadow: 0 10px 25px rgba(0,0,0,0.08);
      --radius: 18px;
    }
    * { box-sizing: border-box; margin: 0; padding: 0; font-family: system-ui, sans-serif; }
    body {
      min-height: 100vh; background: radial-gradient(circle at top, #ffd1ea, #ffeef7);
      display: flex; align-items: center; justify-content: center; padding: 16px; color: var(--text-main);
    }
    .card {
      background: var(--card-bg); box-shadow: var(--shadow); border-radius: var(--radius);
      max-width: 480px; width: 100%; padding: 24px 20px 28px; text-align: center; position: relative;
    }
    .badge {
      display: inline-flex; align-items: center; gap: 6px; padding: 4px 10px; border-radius: 999px;
      background: #ffe0f0; color: var(--primary-dark); font-size: 12px; font-weight: 600; letter-spacing: .08em;
      text-transform: uppercase; margin-bottom: 8px;
    }
    h1 { font-size: 24px; margin-bottom: 4px; }
    h2 { font-size: 14px; font-weight: 500; color: var(--text-muted); margin-bottom: 16px; }
    .wheel-wrapper { margin: 12px auto 18px; display: flex; align-items: center; justify-content: center; }
    .wheel {
      width: 180px; height: 180px; border-radius: 50%;
      background: conic-gradient(from 0deg,#ff9fc8 0deg 60deg,#ffcce2 60deg 120deg,#ff9fc8 120deg 180deg,#ffcce2 180deg 240deg,#ff9fc8 240deg 300deg,#ffcce2 300deg 360deg);
      border: 8px solid #fff; box-shadow: 0 8px 18px rgba(0,0,0,0.12); transition: transform 3s cubic-bezier(0.19,1,0.22,1);
      position: relative; display: flex; align-items: center; justify-content: center;
    }
    .wheel::before {
      content: ""; position: absolute; width: 50px; height: 50px; border-radius: 50%;
      background: #fff; border: 4px solid var(--primary); box-shadow: 0 4px 10px rgba(0,0,0,0.16);
    }
    .pointer {
      width: 0; height: 0; border-left: 12px solid transparent; border-right: 12px solid transparent;
      border-bottom: 18px solid var(--primary-dark); margin-bottom: -6px;
    }
    .current-name { margin-top: 12px; font-size: 18px; font-weight: 700; color: var(--primary-dark); min-height: 26px; }
    .btn {
      display: inline-flex; align-items: center; justify-content: center;
      padding: 10px 18px; margin-top: 18px; border-radius: 999px; border: none; cursor: pointer;
      background: linear-gradient(135deg, var(--primary), var(--primary-dark)); color: #fff;
      font-weight: 600; font-size: 14px; text-transform: uppercase; letter-spacing: .08em;
      box-shadow: 0 8px 16px rgba(255,79,154,0.45);
    }
    .btn-secondary {
      background: #fff; color: var(--primary-dark); border: 1px solid var(--accent);
      box-shadow: none; margin-left: 8px;
    }
    .info { font-size: 12px; color: var(--text-muted); margin-top: 10px; }
    .winners { margin-top: 18px; text-align: left; font-size: 14px; }
    .winners h3 { margin-bottom: 6px; }
    .winners ol { padding-left: 18px; }
    .winners li { margin-bottom: 4px; }
    .chip {
      padding: 2px 8px; background: #ffe7f4; border-radius: 999px;
      font-size: 11px; margin-left: 4px; color: var(--primary-dark);
    }
  </style>
</head>
<body>
  <div class="card">
    <div class="badge">üîî ¬°ANUNCIO!</div>
    <h1>Sorteo Ganadoras</h1>
    <h2>Ruleta para definir ganadoras del concurso</h2>

    <div class="wheel-wrapper">
      <div class="wheel" id="wheel"></div>
    </div>
    <div class="pointer"></div>

    <div class="current-name" id="currentName">Haz clic en ‚ÄúSortear‚Äù üéÄ</div>

    <button class="btn" id="spinBtn">üéÅ Sortear siguiente ganadora</button>
    <button class="btn btn-secondary" id="resetBtn">Reiniciar sorteo</button>

    <div class="winners">
      <h3>Ganadoras:</h3>
      <ol id="winnerList"></ol>
    </div>

    <p class="info">Doble oportunidad incluida donde corresponde.</p>
  </div>

<script>
const participants = [
  { name: "Pau", tickets: 2 },
  { name: "Catalina Mor", tickets: 2 },
  { name: "Participante 3", tickets: 1 },
  { name: "Participante 4", tickets: 1 },
  { name: "Participante 5", tickets: 1 },
  { name: "Participante 6", tickets: 1 },
  { name: "Participante 7", tickets: 1 },
  { name: "Participante 8", tickets: 1 },
  { name: "Participante 9", tickets: 1 }
];

const winnersNeeded = 4;

let winners = [];
let spinning = false;
let rotation = 0;

const spinBtn = document.getElementById("spinBtn");
const resetBtn = document.getElementById("resetBtn");
const wheel = document.getElementById("wheel");
const currentName = document.getElementById("currentName");
const winnerList = document.getElementById("winnerList");

function buildPool() {
  const pool = [];
  participants.forEach(p => {
    if (!winners.includes(p.name)) {
      for (let i = 0; i < p.tickets; i++) pool.push(p.name);
    }
  });
  return pool;
}

function randomFromPool(pool) {
  return pool[Math.floor(Math.random() * pool.length)];
}

function spinWheelToRandom(name) {
  const turns = 6 + Math.random() * 2;
  rotation += 360 * turns;
  wheel.style.transform = `rotate(${rotation}deg)`;

  setTimeout(() => {
    currentName.textContent = name;
    addWinner(name);
    spinning = false;
    updateButtons();
  }, 3000);
}

function addWinner(name) {
  winners.push(name);
  renderWinners();
}

function renderWinners() {
  winnerList.innerHTML = "";
  winners.forEach((w, i) => {
    const li = document.createElement("li");
    li.textContent = w;
    winnerList.appendChild(li);
  });
}

function updateButtons() {
  const pool = buildPool();
  spinBtn.disabled = spinning || winners.length >= winnersNeeded || pool.length === 0;
}

spinBtn.addEventListener("click", () => {
  if (spinning) return;
  const pool = buildPool();
  if (pool.length === 0) return;

  spinning = true;
  updateButtons();
  currentName.textContent = "Sorteando...";
  const selected = randomFromPool(pool);
  spinWheelToRandom(selected);
});

resetBtn.addEventListener("click", () => {
  winners = [];
  spinning = false;
  rotation = 0;
  wheel.style.transform = "rotate(0deg)";
  currentName.textContent = "Haz clic en ‚ÄúSortear‚Äù üéÄ";
  winnerList.innerHTML = "";
  updateButtons();
});

updateButtons();
</script>
</body>
</html>
